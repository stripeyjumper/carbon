import { Meta, Story, Canvas } from "@storybook/addon-docs";
import { StepFlow } from "."
import * as stories from "./step-flow.stories.tsx";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import TranslationKeysTable from "../../../.storybook/utils/translation-keys-table";

<Meta
  title="Step Flow"
  parameters={{ info: { disable: true }, controls: { disabled: true } }}
/>

# Step Flow

<a
  target="_blank"
  href="https://zeroheight.com/2ccf2b601/p/734c86-step-flow/b/83830f"
  style={{ color: '#007E45', fontWeight: 'bold', textDecoration: 'underline' }}
>
  Product Design System component
</a>

Provide a way to represent an end-to-end journey that a user can complete in one go.

This component has a specific start and end point, as well as showing the current step in the journey.

Use a step flow to help a suer complete tasks in a specifc order, based on their needs.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)

## Quick Start

```js
import StepFlow from "carbon-react/lib/components/step-flow";
```

## Examples

### Default

<Canvas>
  <Story name="default" story={stories.DefaultStory}/>
</Canvas>

### with category

<Canvas>
  <Story name="all elements" story={stories.CategoryStory}/>
</Canvas>

### with showProgressIndicator

You can set the `showProgressIndicator` prop to `true` to render the progress indicator within the component.

<Canvas>
  <Story name="showProgressIndicator" story={stories.ShowProgressIndicatorStory}/>
</Canvas>

### with currentStep

The `currentStep` prop can be used to set the current step, this will update the step label and update the progress indicator. Your
current step can be between `1` and `8`.

<Canvas>
  <Story name="currentStep" story={stories.CurrentStepStory}/>
</Canvas>

### with totalSteps

The `totalSteps` prop can be used to change the amount of steps, this will update the step label and determine the amount of step indicators rendered. 
You can have between `1` and `8` total steps.

<Canvas>
  <Story name="totalSteps" story={stories.TotalStepsStory}/>
</Canvas>


### with showCloseIcon

You can set the `showCloseIcon` prop to `true` to render a close icon within the component. You can also use the `onDismiss` prop to pass in a function
which is called when a user clicks on the close icon.

<Canvas>
  <Story name="showCloseIcon" story={stories.ShowCloseIconStory}/>
</Canvas>

### Example implemetation

Please see below an example implemetation of how the component can be used with `Button`'s to advance through the user journey. This also fully details the use of the `titleRef`
prop, which is used to pass a ref to ensure the `StepFlow` components content is accessible via a screen reader. 

This is achieved by placing focus upon a div which contains the viible title and some screen reader only text, which will announce a full sentence to the user, 
including their current category, title, their current step and the total amount of steps in their user journey.

Without it, users utilizing a screen reader will not know if their current title has changed. By ensuring the title is always focused whenever the user journey is 
changed also means a screen reader user can then navigate back down the page too.

<Canvas>
  <Story name="Example implementation" story={stories.ExampleImplementation}/>
</Canvas>

### Example implemetation with translations

Various translations can be applied to both the step label and the screen reader only title.

When providing the screen reader only title the `title`, `category`, `currentStep` and `totalSteps`, have all been passed to ensure screen reader users have all of the same information
as users who can see the component. Please see below how this has been achieved with a French translation.

<Canvas>
  <Story name="Example implementation with translations" story={stories.ExampleImplementationWithTranslations}/>
</Canvas>


## Props

### Content

<StyledSystemProps of={StepFlow} margin noHeader />

<TranslationKeysTable
  translationData={[
    {
      name: "stepFlow.stepLabel",
      description: "The step label which shows the current step and the amount of total steps.",
      type: "func",
      returnType: "string",
    },
        {
      name: "stepFlow.screenReaderOnlyTitle",
      description: "The full visually hidden sentence which will be announced to users detailing their category, title, current steps and total steps.",
      type: "func",
      returnType: "string",
    }
  ]}
/>
